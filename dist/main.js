!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);const i={GRAVITY:.4,RUN_SPEED:8,TERMINAL_VEL:12,DOG_WIDTH:40,DOG_HEIGHT:30};class n{constructor(t){this.dimensions=t,this.x=this.dimensions.width/4,this.y=this.dimensions.height/1.25,this.vel=0}jump(){this.vel=-1*i.RUN_SPEED}moveDog(){this.y+=this.vel,this.vel+=i.GRAVITY,Math.abs(this.vel)>i.TERMINAL_VEL&&(this.vel>0?this.vel=i.TERMINAL_VEL:this.vel=-1*i.TERMINAL_VEL)}animate(t){this.moveDog(),this.drawDog(t)}drawDog(t){t.fillStyle="orange",t.fillRect(this.x,this.y,i.DOG_WIDTH,i.DOG_HEIGHT)}bounds(){return{left:this.x,right:this.x+i.DOG_WIDTH,top:this.y,bottom:this.y+i.DOG_HEIGHT}}outOfBounds(){return this.y<0}}const o={FENCE_SPEED:2,GAP_HEIGHT:250,FENCE_WIDTH:40,EDGE_BUFFER:10,FENCE_SPACING:400,WARM_UP_SECONDS:2};class r{constructor(t){this.dimensions=t;const e=this.dimensions.width+60*o.WARM_UP_SECONDS*o.FENCE_SPEED;this.fences=[this.randomFence(e),this.randomFence(e+o.FENCE_SPACING),this.randomFence(e+2*o.FENCE_SPACING)]}randomFence(t){const e=this.dimensions.height-2*o.EDGE_BUFFER-o.GAP_HEIGHT,s=Math.random()*e+o.EDGE_BUFFER;return{bottomFence:{left:t,right:o.FENCE_WIDTH+t,top:s+o.GAP_HEIGHT,bottom:this.dimensions.height},passed:!1}}animate(t){this.drawBackground(t),this.moveFences(),this.drawFences(t)}drawBackground(t){const e=new Image;e.src="https://www.123freevectors.com/wp-content/uploads/freevector/grass-sky-free-vector.jpg",t.drawImage(e,0,0,1e3,500)}passedFence(t,e){this.eachFence(s=>{s.bottomFence.right<t.left&&(s.passed||(s.passed=!0,e()))})}moveFences(){if(this.eachFence((function(t){t.bottomFence.left-=o.FENCE_SPEED,t.bottomFence.right-=o.FENCE_SPEED})),this.fences[0].bottomFence.right<=0){this.fences.shift();const t=this.fences[1].bottomFence.left+o.FENCE_SPACING;this.fences.push(this.randomFence(t))}}drawFences(t){this.eachFence((function(e){const s=new Image;s.src="http://getdrawings.com/vectors/wood-grain-pattern-vector-23.jpg",t.drawImage(s,e.bottomFence.left,e.bottomFence.top,o.FENCE_WIDTH,e.bottomFence.bottom-e.bottomFence.top)}))}eachFence(t){this.fences.forEach(t.bind(this))}collidesWith(t){let e=!1;return this.eachFence(s=>{((t,e)=>!(t.left>e.right||t.right<e.left)&&!(t.top>e.bottom||t.bottom<e.top))(s.bottomFence,t)&&(e=!0)}),e}}new class{constructor(t){this.ctx=t.getContext("2d"),this.dimensions={width:t.width,height:t.height},this.registerEvents(),this.restart()}play(){this.running=!0,this.animate()}restart(){this.running=!1,this.score=0,this.dog=new n(this.dimensions),this.level=new r(this.dimensions),this.animate()}registerEvents(){this.boundClickHandler=this.click.bind(this),this.ctx.canvas.addEventListener("mousedown",this.boundClickHandler)}click(t){this.running||this.play(),this.dog.jump()}gameOver(){return this.level.collidesWith(this.dog.bounds())||this.dog.outOfBounds(this.height)}animate(){this.level.animate(this.ctx),this.dog.animate(this.ctx),this.gameOver()&&(0===this.score?alert("Looks like you didn't pass any fences..."):alert(`Great Job! You passed ${this.score} fences!`),this.restart()),this.level.passedFence(this.dog.bounds(),()=>{this.score+=1,console.log(this.score)}),this.drawScore(),this.running&&requestAnimationFrame(this.animate.bind(this))}drawScore(){const t={x:this.dimensions.width/1.75,y:this.dimensions.height/8};this.ctx.font="25pt serif",this.ctx.fillStyle="black",this.ctx.fillText(`Fences Passed: ${this.score}`,t.x,t.y),this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.strokeText(`Fences Passed: ${this.score}`,t.x,t.y)}}(document.getElementById("dog-game"))}]);