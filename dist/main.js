!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s={GRAVITY:.4,RUN_SPEED:8,TERMINAL_VEL:12,DOG_WIDTH:40,DOG_HEIGHT:30};class n{constructor(t){this.dimensions=t,this.x=this.dimensions.width/3,this.y=this.dimensions.height/2,this.vel=0}jump(){this.vel=-1*s.RUN_SPEED}moveDog(){this.y+=this.vel,this.vel+=s.GRAVITY,Math.abs(this.vel)>s.TERMINAL_VEL&&(this.vel>0?this.vel=s.TERMINAL_VEL:this.vel=-1*s.TERMINAL_VEL)}animate(t){this.moveDog(),this.drawDog(t)}drawDog(t){t.fillStyle="yellow",t.fillRect(this.x,this.y,s.DOG_WIDTH,s.DOG_HEIGHT)}bounds(){return{left:this.x,right:this.x+s.DOG_WIDTH,top:this.y,bottom:this.y+s.DOG_HEIGHT}}outOfBounds(){const t=this.y<0,e=this.y+s.DOG_HEIGHT>this.dimensions.height;return t||e}}const o={FENCE_SPEED:2,GAP_HEIGHT:450,FENCE_WIDTH:50,EDGE_BUFFER:50,FENCE_SPACING:220,WARM_UP_SECONDS:1};class h{constructor(t){this.dimensions=t;const e=this.dimensions.width+60*o.WARM_UP_SECONDS*o.FENCE_SPEED;this.fences=[this.randomFence(e),this.randomFence(e+o.FENCE_SPACING),this.randomFence(e+2*o.FENCE_SPACING)]}randomFence(t){const e=this.dimensions.height-2*o.EDGE_BUFFER-o.GAP_HEIGHT,i=Math.random()*e+o.EDGE_BUFFER;return{bottomFence:{left:t,right:o.FENCE_WIDTH+t,top:i+o.GAP_HEIGHT,bottom:this.dimensions.height},passed:!1}}animate(t){this.drawBackground(t),this.moveFences(),this.drawFences(t)}drawBackground(t){t.fillStyle="skyblue",t.fillRect(0,0,this.dimensions.width,this.dimensions.height)}passedFence(t,e){this.eachFence(i=>{i.bottomFence.right<t.left&&(i.passed||(i.passed=!0,e()))})}moveFences(){if(this.eachFence((function(t){t.bottomFence.left-=o.FENCE_SPEED,t.bottomFence.right-=o.FENCE_SPEED})),this.fences[0].bottomFence.right<=0){this.fences.shift();const t=this.fences[1].bottomFence.left+o.FENCE_SPACING;this.fences.push(this.randomFence(t))}}drawFences(t){this.eachFence((function(e){t.fillStyle="green",t.fillRect(e.bottomFence.left,e.bottomFence.top,o.FENCE_WIDTH,e.bottomFence.bottom-e.bottomFence.top)}))}eachFence(t){this.fences.forEach(t.bind(this))}collidesWith(t){let e=!1;return this.eachFence(i=>{((t,e)=>!(t.left>e.right||t.right<e.left)&&!(t.top>e.bottom||t.bottom<e.top))(i.bottomFence,t)&&(e=!0)}),e}}new class{constructor(t){this.ctx=t.getContext("2d"),this.dimensions={width:t.width,height:t.height},this.registerEvents(),this.restart()}play(){this.running=!0,this.animate()}restart(){this.running=!1,this.score=0,this.dog=new n(this.dimensions),this.level=new h(this.dimensions),this.animate()}registerEvents(){this.boundClickHandler=this.click.bind(this),this.ctx.canvas.addEventListener("mousedown",this.boundClickHandler)}click(t){this.running||this.play(),this.dog.jump()}gameOver(){return this.level.collidesWith(this.dog.bounds())||this.dog.outOfBounds(this.height)}animate(){this.level.animate(this.ctx),this.dog.animate(this.ctx),this.gameOver()&&(alert(this.score),this.restart()),this.level.passedFence(this.dog.bounds(),()=>{this.score+=1,console.log(this.score)}),this.drawScore(),this.running&&requestAnimationFrame(this.animate.bind(this))}drawScore(){const t={x:this.dimensions.width/2,y:this.dimensions.height/4};this.ctx.font="bold 50pt serif",this.ctx.fillStyle="white",this.ctx.fillText(this.score,t.x,t.y),this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.strokeText(this.score,t.x,t.y)}}(document.getElementById("dog-game"))}]);